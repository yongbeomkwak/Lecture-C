# 배열

배열은 연속된 메모리 공간에 데이터를 할당하는 자료구조이다

    자료형 배열이름[크기];
    자료형 배열이름[크기] = { 값, 값, 값 };

~~~c
#include <stdio.h>

int numArr[15] = { 11, 22, 33, 44, 55, 66, 77, 88, 99, 110, 121, 132, 143, 154, 165 };

~~~

### 배열의 크기 구하기

```c

#include <stdio.h>

int main()
{
    int numArr[10] = { 11, 22, 33, 44, 55, 66, 77, 88, 99, 110 };    // 크기가 10인 int형 배열

    printf("%d\n", sizeof(numArr));                  // 40: 4바이트 크기의 요소가 10개이므로 40
    printf("%d\n", sizeof(numArr) / sizeof(int));    // 10: 배열의 크기를 구할 때는
     // 전체 공간을 요소의 크기로 나눠줌

    return 0;
}

```

### 2차원 배열

    자료형 배열이름[세로크기][가로크기];
    자료형 배열이름[세로크기][가로크기] = { { 값, 값, 값 }, {값, 값, 값} };

~~~c

#include <stdio.h>

int main()
{
    int numArr[3][4] = {    // 세로 크기 3, 가로 크기 4인 int형 2차원 배열 선언
        { 11, 22, 33, 44 },
        { 55, 66, 77, 88 },
        { 99, 110, 121, 132 }
    };
                       // ↓ 세로 인덱스
    printf("%d\n", numArr[0][0]);    // 11 : 세로 인덱스 0, 가로 인덱스 0인 요소 출력
    printf("%d\n", numArr[1][2]);    // 77 : 세로 인덱스 1, 가로 인덱스 2인 요소 출력
    printf("%d\n", numArr[2][0]);    // 99 : 세로 인덱스 2, 가로 인덱스 0인 요소 출력
    printf("%d\n", numArr[2][3]);    // 132: 세로 인덱스 2, 가로 인덱스 2인 요소 출력
                          // ↑ 가로 인덱스

    return 0;
}

~~~

### 2차원 배열 크기
~~~c
#include <stdio.h>

int main()
{
    int numArr[3][4] = {    // 세로 크기 3, 가로 크기 4인 int형 2차원 배열 선언
        { 11, 22, 33, 44 },
        { 55, 66, 77, 88 },
        { 99, 110, 121, 132 }
    };

    printf("%d\n", sizeof(numArr));    // 48: 4바이트 크기의 요소가 12(4*3)개이므로 48

    int col = sizeof(numArr[0]) / sizeof(int);    // 4: 2차원 배열의 가로 크기를 구할 때는 
                                                  // 가로 한 줄의 크기를 요소의 크기로 나눠줌

    int row = sizeof(numArr) / sizeof(numArr[0]); // 3: 2차원 배열의 세로 크기를 구할 때는 
                                    // 배열이 차지하는 전체 공간을 가로 한 줄의 크기로 나눠줌

    printf("%d\n", col);    // 4
    printf("%d\n", row);    // 3

    return 0;
}
~~~

### 포인터를 배열처럼 사용하기

배열은 엄밀히 얘기하면 포인터와 같습니다.<br>

#### 포인터에 malloc을 사용하여 메모리를 할당하여 배열 처럼 사용

~~~c
int main(){

    int *numPtr = malloc(sizeof(int)*10);

    numPtr[0] = 10;
    numPtr[9] = 20;

    printf("%d\n", numPtr[0]);    // 배열처럼 인덱스로 접근하여 값 출력
    printf("%d\n", numPtr[9]);    // 배열처럼 인덱스로 접근하여 값 출력

    free(numPtr);    // 동적으로 할당한 메모리 해제

}
~~~

#### 배열을 담은 변수는 배열의 첫번째 칸을 가르키고 있는 포인터입니다.

첫번째 칸을 기준으로 접근하면 연속된 메모리에 접근할 수 있다는 뜻입니다.

~~~c

#include <stdio.h>
#include <stdlib.h>


int main(){


    int numArr[10] = { 11, 22, 33, 44, 55, 66, 77, 88, 99, 110 };


    printf("%p\n",numArr); // 0x16d5d3120 첫번째 원소 주소
    printf("%d\n",*numArr); // 11 // 첫번째 값을 가르킴
    printf("%p\n",numArr+1); // 0x16d5d3124   첫번째 원소 주소 +4(int타입 크기)
    printf("%d\n",*(numArr+1)); // 22 : 다음칸의 역참조
    
}

~~~

<br>

### 포인터에 2차원 배열구조 메모리 할당하기

    1. 이중 포인터 변수에 세로 공간 메모리 할당
    자료형 **포인터이름 = malloc(sizeof(자료형 *) * 세로크기); 
    
    
    2. 가로 공간 메모리 할당
    반복문으로 반복하면서 포인터[i] = malloc(sizeof(자료형) * 가로크기);
    
    할당: 세로 -> 가로 방향

    할당과 해제는 반대 

    해제: 가로 -> 세로 
    
    3. 반복문으로 반복하면서 free(포인터[i]);와 같이 가로 공간 메모리 해제

    4. free(포인터);와 같이 세로 공간 메모리 해제
    
~~~c

#include <stdio.h>
#include <stdlib.h>    // malloc, free 함수가 선언된 헤더 파일

int main()
{
    int **m = malloc(sizeof(int *) * 3);   
    // 이중 포인터에 (int 포인터 크기 * 세로 크기)만큼
    // 동적 메모리 할당. 배열의 세로

    for (int i = 0; i < 3; i++) // 세로 크기만큼 반복
    {
        m[i] = malloc(sizeof(int) * 4);
        // (int 크기 * 가로 크기)만큼 동적 메모리 할당.
        // 배열의 가로
    }

    // 3 * 4 배열

    m[0][0] = 1;    // 세로 인덱스 0, 가로 인덱스 0인 요소에 값 할당
    m[2][0] = 5;    // 세로 인덱스 2, 가로 인덱스 0인 요소에 값 할당
    m[2][3] = 2;    // 세로 인덱스 2, 가로 인덱스 3인 요소에 값 할당

    printf("%d\n", m[0][0]);    
    // 1: 세로 인덱스 0, 가로 인덱스 0인 요소의 값 출력
    printf("%d\n", m[2][0]);    
    // 5: 세로 인덱스 2, 가로 인덱스 0인 요소의 값 출력
    printf("%d\n", m[2][3]);  
    // 2: 세로 인덱스 2, 가로 인덱스 3인 요소의 값 출력

    for (int i = 0; i < 3; i++)    // 세로 크기만큼 반복
    {
        free(m[i]);                // 2차원 배열의 가로 공간 메모리 해제
    }

    free(m);    // 2차원 배열의 세로 공간 메모리 해제

    return 0;
}

~~~
